# 03_god_mode → < 50 MB (70 LPA winner – use this!)
FROM python:3.11-alpine AS base
WORKDIR /app
RUN pip install --no-cache-dir flask

FROM base AS builder
# Nothing else – already tiny

FROM alpine:latest
RUN apk add --no-cache python3 py3-pip && ln -sf python3 /usr/bin/python
COPY --from=base /usr/local/lib/python3.11/site-packages /usr/local/lib/python3.11/site-packages
COPY --from=base /usr/local/bin/flask /usr/local/bin/flask
COPY app.py .
EXPOSE 8080
CMD ["flask", "run", "--host=0.0.0.0", "--port=8080"]